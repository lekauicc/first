SSH协议是基于非对称加密方法的，服务器和客户端都会生成自己的公钥和私钥。 

(1) 服务器建立公钥。若远程服务器是新系统，会在/etc/ssh目录下生成一个名为ssh_host_ecdsa_key.pub的公钥，同时生成一个名为ssh_host_ecdsa_key的私钥，这一对就是远程服务器的公钥与私钥。之后每回启动sshd服务的时候，系统会自动在此路径下查找公钥。 

远程服务器的公钥： 



(2) 客户端请求连接（linux或者mac系统可以直接通过自带的shell连接）

(3) 服务器发送公钥给客户端。服务器接到请求后，把公钥传给客户端使用。

(4) 客户端记录服务器公钥并计算自己的公私钥。客户端将服务器传来的公钥文件记录在~/.ssh/known_hosts中(linux系统下，若是windows系统，远程服务器的公钥可能存放在C:\Users\Administrator\.ssh\known_hosts中，不同的ssh客户端实现，位置可能不同)，若是已经记录有该服务器公钥，则比对是否一致，一致后就计算客户端自己的公私钥。 

(5) 客户端发送自己的公钥给服务器。客户端将自己的公钥发送给服务器，这样服务器端就有客户端公钥+服务器自己私钥，客户端就有服务器公钥+客户端自己私钥，组成了非对称加密系统。 

(6) 开始双向加解密。服务器发送数据：用客户端公钥加密，客户端收到数据后用自己私钥解密。客户端发送数据：用服务器公钥加密，服务器收到数据后用自己私钥解密。 
————————————————

                            版权声明：本文为博主原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接和本声明。
                        
原文链接：https://blog.csdn.net/java_lifeng/article/details/103879592